<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<title>–ù–æ–≤–æ–≥–æ–¥–Ω—è—è –æ—Ç–∫—Ä—ã—Ç–∫–∞ 2026</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
html,body{
  margin:0;width:100%;height:100%;
  overflow:hidden;
  font-family:'Segoe UI',system-ui,-apple-system,sans-serif;
  background:#000;
  color:#fff;
  -webkit-tap-highlight-color: transparent;
  touch-action: manipulation;
  overscroll-behavior: none;
}
body{
  background: 
    radial-gradient(
      ellipse at 20% 20%,
      rgba(20, 40, 80, 0.8) 0%,
      rgba(5, 15, 40, 0.9) 50%,
      #000 100%
    ),
    url("data:image/svg+xml,%3Csvg width='100' height='100' viewBox='0 0 100 100' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M11 18c3.866 0 7-3.134 7-7s-3.134-7-7-7-7 3.134-7 7 3.134 7 7 7zm48 25c3.866 0 7-3.134 7-7s-3.134-7-7-7-7 3.134-7 7 3.134 7 7 7zm-43-7c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zm63 31c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zM34 90c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zm56-76c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zM12 86c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm28-65c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm23-11c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zm-6 60c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm29 22c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zM32 63c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zm57-13c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zm-9-21c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2zM60 91c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2zM35 41c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2zM12 60c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2z' fill='%2300aaff' fill-opacity='0.05' fill-rule='evenodd'/%3E%3C/svg%3E");
}

/* –®–µ–π–¥–µ—Ä–Ω—ã–π —Ñ–æ–Ω */
#shaderCanvas {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  z-index: 1;
  pointer-events: none;
  opacity: 0.6;
}

#snow{
  position:fixed;
  inset:0;
  pointer-events:none;
  z-index:2;
  opacity:0.8;
}
#tg{
  position:fixed;
  left:20px;
  bottom:20px;
  font-size:14px;
  opacity:.3;
  z-index:5;
  font-family:monospace;
}

/* –°—Ç–∞—Ä—Ç–æ–≤—ã–π —ç–∫—Ä–∞–Ω */
#start{
  position:fixed;
  inset:0;
  display:flex;
  flex-direction:column;
  justify-content:center;
  align-items:center;
  gap:40px;
  z-index:100;
  background:radial-gradient(
    circle at center,
    rgba(0, 30, 60, 0.95) 0%,
    rgba(0, 15, 40, 0.98) 100%
  );
  backdrop-filter: blur(20px);
  opacity:0;
  animation: gentleAppear 1.2s cubic-bezier(0.4, 0, 0.2, 1) forwards;
}
@keyframes gentleAppear {
  from { 
    opacity: 0;
    backdrop-filter: blur(0px);
  }
  to { 
    opacity: 1;
    backdrop-filter: blur(20px);
  }
}

/* –ú–µ—Ä—Ü–∞—é—â–∏–µ –∑–≤—ë–∑–¥—ã –Ω–∞ —Å—Ç–∞—Ä—Ç–æ–≤–æ–º —ç–∫—Ä–∞–Ω–µ */
.stars {
  position: absolute;
  inset: 0;
  background-image: 
    radial-gradient(1px 1px at 20% 30%, rgba(255,255,255,0.8) 50%, transparent 100%),
    radial-gradient(1px 1px at 40% 70%, rgba(255,255,255,0.6) 50%, transparent 100%),
    radial-gradient(1px 1px at 60% 20%, rgba(255,255,255,0.7) 50%, transparent 100%),
    radial-gradient(1px 1px at 80% 50%, rgba(255,255,255,0.5) 50%, transparent 100%),
    radial-gradient(1.5px 1.5px at 30% 80%, rgba(255,255,255,0.9) 50%, transparent 100%),
    radial-gradient(1.5px 1.5px at 70% 10%, rgba(255,255,255,0.6) 50%, transparent 100%),
    radial-gradient(1px 1px at 90% 90%, rgba(255,255,255,0.8) 50%, transparent 100%);
  background-size: 200px 200px;
  animation: starsTwinkle 8s ease-in-out infinite;
}
@keyframes starsTwinkle {
  0%, 100% { opacity: 0.3; }
  50% { opacity: 1; }
}

#browserNote{
  max-width:400px;
  padding:28px 32px;
  font-size:16px;
  line-height:1.7;
  text-align:center;
  background:linear-gradient(
    135deg,
    rgba(20, 40, 80, 0.7) 0%,
    rgba(10, 25, 60, 0.9) 100%
  );
  border-radius:28px;
  backdrop-filter:blur(15px);
  border:1px solid rgba(100,200,255,0.15);
  box-shadow:
    0 20px 60px rgba(0, 100, 255, 0.3),
    0 8px 32px rgba(0, 0, 0, 0.4),
    inset 0 1px 0 rgba(255,255,255,0.1);
  transform:translateY(20px);
  animation: noteAppear 1s 0.5s cubic-bezier(0.34, 1.56, 0.64, 1) forwards;
  position:relative;
  overflow:hidden;
}
#browserNote::before {
  content:'';
  position:absolute;
  top:0;
  left:0;
  right:0;
  height:1px;
  background:linear-gradient(90deg, 
    transparent,
    rgba(100,200,255,0.5),
    transparent);
}
@keyframes noteAppear {
  to { transform:translateY(0); }
}

#startBtn{
  padding:22px 52px;
  font-size:26px;
  font-weight:600;
  letter-spacing:1px;
  border:none;
  border-radius:60px;
  background:linear-gradient(
    135deg,
    #00e0ff 0%,
    #0088ff 50%,
    #a100ff 100%
  );
  background-size:200% 200%;
  color:#fff;
  cursor:pointer;
  position:relative;
  overflow:hidden;
  isolation:isolate;
  box-shadow:
    0 0 80px rgba(0, 234, 255, 0.6),
    0 20px 60px rgba(0, 0, 0, 0.5),
    inset 0 1px 0 rgba(255,255,255,0.2);
  transition:all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
  animation:
    gradientFlow 4s ease infinite,
    gentlePulse 3s ease-in-out infinite,
    buttonAppear 1s 0.8s cubic-bezier(0.34, 1.56, 0.64, 1) forwards;
  opacity:0;
  transform:scale(0.9);
}
#startBtn::before {
  content:'';
  position:absolute;
  inset:0;
  background:linear-gradient(
    90deg,
    transparent 30%,
    rgba(255,255,255,0.1) 50%,
    transparent 70%
  );
  background-size:200% 100%;
  animation:shine 3s ease-in-out infinite;
  z-index:-1;
  border-radius:60px;
}
@keyframes gradientFlow {
  0%, 100% { background-position:0% 50%; }
  50% { background-position:100% 50%; }
}
@keyframes gentlePulse {
  0%, 100% { 
    box-shadow:
      0 0 80px rgba(0, 234, 255, 0.6),
      0 20px 60px rgba(0, 0, 0, 0.5);
  }
  50% { 
    box-shadow:
      0 0 100px rgba(0, 234, 255, 0.8),
      0 25px 70px rgba(0, 0, 0, 0.6);
  }
}
@keyframes shine {
  0% { background-position:-200% 0; }
  100% { background-position:200% 0; }
}
@keyframes buttonAppear {
  to {
    opacity:1;
    transform:scale(1);
  }
}
#startBtn:hover, #startBtn:active{
  transform:scale(1.08);
  box-shadow:
    0 0 120px rgba(0, 234, 255, 0.9),
    0 25px 80px rgba(0, 0, 0, 0.7);
}

/* –°—Ü–µ–Ω–∞ —Å –æ—Ç–∫—Ä—ã—Ç–∫–æ–π */
.scene{
  height:100%;
  display:flex;
  justify-content:center;
  align-items:center;
  perspective:1200px;
  opacity:0;
  transform:scale(0.95);
  transition:all 1.2s cubic-bezier(0.4, 0, 0.2, 1);
}
.scene.active {
  opacity:1;
  transform:scale(1);
}

.card{
  width:min(88vw, 820px);
  height:min(55vw, 480px);
  position:relative;
  transform-style:preserve-3d;
  transition:transform 1.5s cubic-bezier(0.68, -0.55, 0.265, 1.55);
}

/* –ì–∏—Ä–ª—è–Ω–¥–∞ –≤–æ–∫—Ä—É–≥ –æ—Ç–∫—Ä—ã—Ç–∫–∏ */
.card::before {
  content:'';
  position:absolute;
  inset:-10px;
  background:conic-gradient(
    from 0deg,
    #ff0000, #ff9900, #ffff00, #00ff00,
    #00ffff, #0000ff, #9900ff, #ff0000
  );
  border-radius:40px;
  z-index:-1;
  padding:4px;
  -webkit-mask:
    linear-gradient(#fff 0 0) content-box,
    linear-gradient(#fff 0 0);
  -webkit-mask-composite: xor;
  mask-composite: exclude;
  animation:rotateGarland 20s linear infinite;
  filter:blur(2px);
  opacity:0.7;
}
@keyframes rotateGarland {
  to { transform:rotate(360deg); }
}

.side{
  position:absolute;
  inset:0;
  border-radius:36px;
  backface-visibility:hidden;
  padding:36px;
  background:linear-gradient(
    145deg,
    rgba(0, 40, 100, 0.95) 0%,
    rgba(0, 20, 60, 0.98) 100%
  );
  border:1px solid rgba(255,255,255,0.1);
  box-shadow:
    0 30px 80px rgba(0, 100, 255, 0.4),
    inset 0 1px 0 rgba(255,255,255,0.15),
    inset 0 -1px 0 rgba(0,0,0,0.2);
  display:flex;
  flex-direction:column;
  overflow:hidden;
}
.side::before {
  content:'';
  position:absolute;
  inset:0;
  background:
    radial-gradient(
      circle at 20% 30%,
      rgba(100,200,255,0.1) 0%,
      transparent 50%
    ),
    radial-gradient(
      circle at 80% 70%,
      rgba(255,100,200,0.1) 0%,
      transparent 50%
    );
  border-radius:36px;
}
.back{transform:rotateY(180deg);}

.text{
  flex:1;
  background:linear-gradient(
    135deg,
    rgba(0, 20, 50, 0.6) 0%,
    rgba(0, 10, 30, 0.8) 100%
  );
  border-radius:28px;
  padding:32px;
  display:flex;
  flex-direction:column;
  justify-content:center;
  align-items:center;
  text-align:center;
  backdrop-filter:blur(15px);
  border:1px solid rgba(255,255,255,0.05);
  position:relative;
  z-index:2;
  box-shadow:
    inset 0 1px 0 rgba(255,255,255,0.05),
    inset 0 -1px 0 rgba(0,0,0,0.2);
}
.text::before {
  content:'‚ùÑÔ∏è';
  position:absolute;
  top:20px;
  right:20px;
  font-size:24px;
  opacity:0.3;
  animation:float 4s ease-in-out infinite;
}
@keyframes float {
  0%, 100% { transform:translateY(0) rotate(0deg); }
  50% { transform:translateY(-10px) rotate(180deg); }
}

.text h1{
  margin:0 0 24px;
  font-size:clamp(32px, 8vw, 52px);
  background:linear-gradient(
    45deg,
    #ffffff 0%,
    #a0e0ff 50%,
    #ffa0ff 100%
  );
  -webkit-background-clip:text;
  background-clip:text;
  color:transparent;
  text-shadow:
    0 2px 4px rgba(0,0,0,0.3),
    0 0 20px rgba(160,224,255,0.3);
  font-weight:800;
  letter-spacing:-0.5px;
}

.text p{
  margin:0;
  font-size:clamp(18px, 4vw, 24px);
  line-height:1.8;
  color:rgba(255,255,255,0.95);
  max-width:680px;
  text-shadow:0 1px 2px rgba(0,0,0,0.5);
  font-weight:300;
}

/* –ú–∏–≥–∞—é—â–∞—è –≥–∏—Ä–ª—è–Ω–¥–∞ */
.garland{
  display:flex;
  justify-content:space-around;
  margin-bottom:28px;
  padding:16px;
  background:linear-gradient(
    90deg,
    rgba(0,0,0,0.3) 0%,
    rgba(0,0,0,0.5) 100%
  );
  border-radius:24px;
  border:1px solid rgba(255,255,255,0.05);
}
.garland span{
  width:14px;
  height:14px;
  border-radius:50%;
  background:hsl(calc(var(--i) * 20), 100%, 65%);
  box-shadow:
    0 0 20px currentColor,
    inset 0 1px 0 rgba(255,255,255,0.3);
  animation:
    blink 2.5s infinite alternate calc(var(--i) * 0.1s),
    glow 3s ease-in-out infinite;
  position:relative;
}
.garland span::before {
  content:'';
  position:absolute;
  inset:-2px;
  background:currentColor;
  border-radius:50%;
  filter:blur(6px);
  opacity:0.3;
}
@keyframes glow {
  0%, 100% { filter:brightness(1); }
  50% { filter:brightness(1.5); }
}

/* –ó–∞—Ç–µ–º–Ω–µ–Ω–∏–µ –∏ –ø–æ–∑–¥—Ä–∞–≤–ª–µ–Ω–∏–µ */
#dark{
  position:fixed;
  inset:0;
  background:#000;
  opacity:0;
  transition:opacity 2.5s cubic-bezier(0.4, 0, 0.2, 1);
  z-index:20;
  pointer-events:none;
}

#finalText{
  position:fixed;
  inset:0;
  display:flex;
  justify-content:center;
  align-items:center;
  text-align:center;
  font-size:clamp(40px, 9vw, 84px);
  font-weight:900;
  opacity:0;
  transition:opacity 1.8s ease;
  z-index:22;
  background:linear-gradient(
    45deg,
    #ffffff 0%,
    #00eaff 25%,
    #ff00ff 50%,
    #00eaff 75%,
    #ffffff 100%
  );
  -webkit-background-clip:text;
  background-clip:text;
  color:transparent;
  padding:40px;
  text-shadow:
    0 0 40px rgba(0,234,255,0.7),
    0 0 80px rgba(0,234,255,0.4);
  letter-spacing:2px;
  pointer-events:none;
}
#finalText::after {
  content:'‚ú®';
  font-size:0.8em;
  animation:sparkle 2s ease-in-out infinite;
}
@keyframes sparkle {
  0%, 100% { opacity:0.5; }
  50% { opacity:1; }
}

/* –í—Å–ø—ã—à–∫–∞ */
#whiteFlash{
  position:fixed;
  inset:0;
  background:linear-gradient(
    135deg,
    rgba(255,255,255,1) 0%,
    rgba(220,240,255,1) 100%
  );
  opacity:0;
  z-index:30;
  pointer-events:none;
  transition:opacity 0.1s linear;
}

/* –í–∏–¥–µ–æ */
#cat{
  position:fixed;
  inset:0;
  width:100%;
  height:100%;
  object-fit:cover;
  opacity:0;
  z-index:35;
  pointer-events:none;
  transform:scale(1.02);
  transition:opacity 2s ease, transform 3s ease;
}
#cat.playing {
  opacity:1;
  transform:scale(1);
}

#videoFade{
  position:fixed;
  inset:0;
  background:#000;
  opacity:0;
  z-index:36;
  pointer-events:none;
  transition:opacity 10s linear;
}

/* –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä –∑–∞–≥—Ä—É–∑–∫–∏ –≤–∏–¥–µ–æ */
#videoLoader{
  position:fixed;
  top:50%;
  left:50%;
  transform:translate(-50%, -50%);
  color:#fff;
  font-size:22px;
  font-weight:300;
  opacity:0;
  z-index:37;
  pointer-events:none;
  background:linear-gradient(
    135deg,
    rgba(0,40,80,0.7) 0%,
    rgba(0,20,50,0.9) 100%
  );
  padding:24px 48px;
  border-radius:24px;
  backdrop-filter:blur(20px);
  border:1px solid rgba(255,255,255,0.1);
  box-shadow:0 20px 60px rgba(0,0,0,0.5);
}
#videoLoader::after {
  content:'...';
  animation:dots 1.5s steps(4,end) infinite;
}
@keyframes dots {
  0%, 20% { content:'.'; }
  40% { content:'..'; }
  60%, 100% { content:'...'; }
}

/* –§–∏–Ω–∞–ª—å–Ω—ã–π —ç–∫—Ä–∞–Ω */
#finalScreen{
  position:fixed;
  inset:0;
  background:linear-gradient(
    135deg,
    #000810 0%,
    #001830 50%,
    #000810 100%
  );
  opacity:0;
  z-index:50;
  overflow:hidden;
  transition:opacity 2s ease;
}

/* –õ–µ–¥—è–Ω–æ–π —É–∑–æ—Ä */
.iceCrystal {
  position:absolute;
  background:linear-gradient(
    45deg,
    transparent,
    rgba(180,230,255,0.2),
    transparent
  );
  border-radius:2px;
  filter:blur(1px);
  transform-origin:center;
  animation:crystalGrow 4s ease-out forwards;
}
@keyframes crystalGrow {
  from {
    transform:scale(0) rotate(0deg);
    opacity:0;
  }
  to {
    transform:scale(1) rotate(360deg);
    opacity:0.3;
  }
}

#qrContainer{
  position:absolute;
  top:50%;
  left:50%;
  transform:translate(-50%, -50%) scale(0.9);
  width:min(90vw, 420px);
  display:flex;
  flex-direction:column;
  align-items:center;
  opacity:0;
  transition:all 1.5s cubic-bezier(0.34, 1.56, 0.64, 1);
}

#qr{
  width:240px;
  height:240px;
  margin-bottom:32px;
  background:linear-gradient(
    135deg,
    rgba(255,255,255,0.95) 0%,
    rgba(240,248,255,0.98) 100%
  );
  padding:20px;
  border-radius:28px;
  box-shadow:
    0 30px 80px rgba(0,200,255,0.4),
    0 10px 40px rgba(0,0,0,0.4),
    inset 0 1px 0 rgba(255,255,255,0.5),
    inset 0 -1px 0 rgba(0,0,0,0.1);
  transform:translateY(-60px) scale(0.8);
  opacity:0;
  transition:all 1.2s cubic-bezier(0.34, 1.56, 0.64, 1) 0.8s;
  position:relative;
  overflow:hidden;
}
#qr::before {
  content:'';
  position:absolute;
  inset:0;
  background:linear-gradient(
    45deg,
    transparent 30%,
    rgba(255,255,255,0.1) 50%,
    transparent 70%
  );
  background-size:200% 100%;
  animation:shine 4s ease-in-out infinite;
}
#qr img{
  width:100%;
  height:100%;
  border-radius:20px;
  display:block;
  position:relative;
  z-index:1;
}

#telegramLink{
  font-size:20px;
  color:#8fefff;
  text-decoration:none;
  margin-bottom:36px;
  padding:16px 32px;
  background:linear-gradient(
    135deg,
    rgba(0,60,120,0.4) 0%,
    rgba(0,40,100,0.6) 100%
  );
  border-radius:20px;
  border:1px solid rgba(143,239,255,0.3);
  backdrop-filter:blur(10px);
  transform:translateY(-40px);
  opacity:0;
  transition:all 1.2s cubic-bezier(0.34, 1.56, 0.64, 1) 1.3s;
  font-weight:300;
  letter-spacing:0.5px;
}
#telegramLink:hover{
  background:linear-gradient(
    135deg,
    rgba(0,80,160,0.5) 0%,
    rgba(0,60,140,0.7) 100%
  );
  border-color:rgba(143,239,255,0.6);
  transform:translateY(-40px) scale(1.05);
}

#finalWish{
  max-width:90%;
  font-size:clamp(18px, 4vw, 20px);
  line-height:1.9;
  text-align:center;
  color:rgba(255,255,255,0.95);
  padding:32px;
  background:linear-gradient(
    135deg,
    rgba(0,20,40,0.5) 0%,
    rgba(0,10,30,0.7) 100%
  );
  border-radius:24px;
  backdrop-filter:blur(15px);
  border:1px solid rgba(255,255,255,0.05);
  transform:translateY(-30px);
  opacity:0;
  transition:all 1.2s cubic-bezier(0.34, 1.56, 0.64, 1) 1.8s;
  font-weight:300;
  text-shadow:0 1px 2px rgba(0,0,0,0.5);
}
#finalWish::before,
#finalWish::after {
  content:'‚ùÑÔ∏è';
  position:absolute;
  font-size:20px;
  opacity:0.5;
}
#finalWish::before {
  top:15px;
  left:15px;
}
#finalWish::after {
  bottom:15px;
  right:15px;
}

/* –°–µ—Ä–¥–µ—á–∫–∏ */
#heartsCanvas{
  position:fixed;
  inset:0;
  pointer-events:none;
  z-index:55;
  opacity:0.9;
}

/* –ö–Ω–æ–ø–∫–∞ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞ */
#restart{
  position:fixed;
  right:32px;
  bottom:32px;
  padding:16px 32px;
  border-radius:24px;
  border:none;
  background:linear-gradient(
    135deg,
    rgba(255,255,255,0.15) 0%,
    rgba(255,255,255,0.05) 100%
  );
  backdrop-filter:blur(20px);
  color:#fff;
  font-size:18px;
  font-weight:400;
  cursor:pointer;
  opacity:0;
  transition:all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
  z-index:60;
  border:1px solid rgba(255,255,255,0.1);
  box-shadow:0 10px 40px rgba(0,0,0,0.3);
}
#restart:hover{
  background:linear-gradient(
    135deg,
    rgba(255,255,255,0.25) 0%,
    rgba(255,255,255,0.15) 100%
  );
  transform:translateY(-2px) scale(1.05);
  border-color:rgba(255,255,255,0.3);
  box-shadow:0 15px 50px rgba(0,0,0,0.4);
}

/* –°–Ω–µ–∂–∏–Ω–∫–∏ –≤ —É–≥–ª–∞—Ö */
.cornerSnow {
  position:fixed;
  width:100px;
  height:100px;
  pointer-events:none;
  z-index:10;
  opacity:0.3;
}
.cornerSnow::before {
  content:'‚ùÑ';
  position:absolute;
  font-size:40px;
  animation:spin 20s linear infinite;
}
@keyframes spin {
  to { transform:rotate(360deg); }
}
#snow1 { top:20px; left:20px; }
#snow2 { top:20px; right:20px; }
#snow3 { bottom:20px; left:20px; }
#snow4 { bottom:20px; right:20px; }

/* –ê–Ω–∏–º–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Ñ–æ–Ω –¥–ª—è —Ñ–∏–Ω–∞–ª—å–Ω–æ–≥–æ —ç–∫—Ä–∞–Ω–∞ */
.aurora {
  position:absolute;
  inset:0;
  background:linear-gradient(
    45deg,
    rgba(0,100,255,0.1) 0%,
    rgba(100,0,255,0.1) 50%,
    rgba(0,100,255,0.1) 100%
  );
  background-size:400% 400%;
  animation:auroraMove 20s ease infinite;
  opacity:0.3;
}
@keyframes auroraMove {
  0%, 100% { background-position:0% 50%; }
  50% { background-position:100% 50%; }
}
</style>
</head>

<body>

<!-- –®–µ–π–¥–µ—Ä–Ω—ã–π —Ñ–æ–Ω -->
<canvas id="shaderCanvas"></canvas>

<!-- –°–Ω–µ–≥ -->
<canvas id="snow"></canvas>

<!-- –°–µ—Ä–¥–µ—á–∫–∏ -->
<canvas id="heartsCanvas"></canvas>

<div id="tg">üéÑ –° –ù–æ–≤—ã–º 2026 –ì–æ–¥–æ–º! ‚ú®</div>

<!-- –°–Ω–µ–∂–∏–Ω–∫–∏ –≤ —É–≥–ª–∞—Ö -->
<div class="cornerSnow" id="snow1"></div>
<div class="cornerSnow" id="snow2"></div>
<div class="cornerSnow" id="snow3"></div>
<div class="cornerSnow" id="snow4"></div>

<!-- –°—Ç–∞—Ä—Ç–æ–≤—ã–π —ç–∫—Ä–∞–Ω -->
<div id="start">
  <div class="stars"></div>
  <div id="browserNote">
    <div style="font-size:20px;margin-bottom:12px;opacity:0.8;">üéÖ‚ú®</div>
    –î–ª—è –≤–æ–ª—à–µ–±–Ω–æ–≥–æ –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ–º:<br>
    <b style="color:#00eaff">Safari –Ω–∞ iOS</b> –∏–ª–∏ <b style="color:#00eaff">Chrome</b><br><br>
    <span style="opacity:0.8;">üéß –í–∫–ª—é—á–∏—Ç–µ –∑–≤—É–∫ –¥–ª—è –ø–æ–ª–Ω–æ–≥–æ –ø–æ–≥—Ä—É–∂–µ–Ω–∏—è</span><br>
    <span style="font-size:14px;opacity:0.6;">(–æ—Ç–∫—Ä–æ–π—Ç–µ –∫–∞—Ä—Ç–æ—á–∫—É –æ–¥–Ω–∏–º –Ω–∞–∂–∞—Ç–∏–µ–º)</span>
  </div>
  <button id="startBtn">‚ú® –û—Ç–∫—Ä—ã—Ç—å –≤–æ–ª—à–µ–±—Å—Ç–≤–æ ‚ú®</button>
</div>

<!-- –û—Å–Ω–æ–≤–Ω–∞—è –æ—Ç–∫—Ä—ã—Ç–∫–∞ -->
<div class="scene" id="scene">
  <div class="card" id="card">
    <div class="side front" id="front"></div>
    <div class="side back" id="back"></div>
  </div>
</div>

<!-- –≠—Ñ—Ñ–µ–∫—Ç—ã –ø–µ—Ä–µ—Ö–æ–¥–∞ -->
<div id="dark"></div>
<div id="finalText"></div>
<div id="whiteFlash"></div>

<!-- –í–∏–¥–µ–æ —Å –∫–æ—Ç–æ–º -->
<video 
  id="cat" 
  playsinline 
  webkit-playsinline
  preload="auto"
  muted
></video>

<div id="videoLoader">üé¨ –ó–∞–≥—Ä—É–∑–∫–∞ –≤–æ–ª—à–µ–±—Å—Ç–≤–∞</div>
<div id="videoFade"></div>

<!-- –§–∏–Ω–∞–ª—å–Ω—ã–π —ç–∫—Ä–∞–Ω -->
<div id="finalScreen">
  <div class="aurora"></div>
  <div id="qrContainer">
    <div id="qr">
      <img src="qr.png" alt="QR –∫–æ–¥ Telegram –∫–∞–Ω–∞–ª–∞" 
           onerror="this.onerror=null; this.src='data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><rect width=%22100%22 height=%22100%22 fill=%22white%22/><text x=%2250%22 y=%2255%22 text-anchor=%22middle%22 fill=%22black%22 font-size=%2214%22>@Byte_squade</text></svg>'">
    </div>
    <a id="telegramLink" href="https://t.me/Byte_squade" target="_blank">
      ‚ú® t.me/Byte_squade ‚ú®
    </a>
    <div id="finalWish">
      –ü—É—Å—Ç—å –Ω–æ–≤—ã–π –≥–æ–¥ –ø—Ä–∏–Ω–µ—Å—ë—Ç<br>
      –±–æ–ª—å—à–µ –∂–∏–≤—ã—Ö –≤—Å—Ç—Ä–µ—á –∏ —Ç—ë–ø–ª—ã—Ö –º–æ–º–µ–Ω—Ç–æ–≤,<br>
      –∏—Å–∫—Ä–µ–Ω–Ω–∏—Ö —Ä–∞–∑–≥–æ–≤–æ—Ä–æ–≤ –∏ –≤–∑–∞–∏–º–æ–ø–æ–Ω–∏–º–∞–Ω–∏—è.<br><br>
      –ñ–µ–ª–∞—é, —á—Ç–æ–±—ã —Ä—è–¥–æ–º –≤—Å–µ–≥–¥–∞ –±—ã–ª–∏ —Ç–µ,<br>
      —Å –∫–µ–º –º–æ–∂–Ω–æ –±—ã—Ç—å —Å–æ–±–æ–π –±–µ–∑ –º–∞—Å–æ–∫,<br>
      –¥–µ–ª–∏—Ç—å—Å—è —Ä–∞–¥–æ—Å—Ç—å—é –∏ –Ω–∞—Ö–æ–¥–∏—Ç—å –ø–æ–¥–¥–µ—Ä–∂–∫—É.<br><br>
      –°—á–∞—Å—Ç–ª–∏–≤–æ–≥–æ –ù–æ–≤–æ–≥–æ 2026 –ì–æ–¥–∞! üéÑüåü
    </div>
  </div>
</div>

<button id="restart" onclick="location.reload()">üîÑ –ó–∞–ø—É—Å—Ç–∏—Ç—å —Å–Ω–æ–≤–∞</button>

<audio id="music" src="zitronsound-christmas-village.mp3" loop></audio>

<script>
/* ========== –ö–û–ù–§–ò–ì–£–†–ê–¶–ò–Ø ========== */
const CONFIG = {
  CARD_FLIP_TIME: 8000,
  FINAL_TEXT_DELAY: 1500,
  FLASH_DELAY: 500,
  VIDEO_FADE_TIME: 12,
  FINAL_SCREEN_DELAY: 3000,
  HEART_SPAWN_RATE: 180,
  MAX_HEARTS: 80
};

/* ========== –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–Ø ========== */
const isMobile = /iPhone|iPad|iPod|Android/i.test(navigator.userAgent);
const state = {
  videoLoaded: false,
  videoPlaying: false,
  audioContext: null,
  flashSound: null,
  currentCard: 0,
  hearts: [],
  iceCrystals: []
};

const elements = {
  start: document.getElementById('start'),
  startBtn: document.getElementById('startBtn'),
  scene: document.getElementById('scene'),
  card: document.getElementById('card'),
  front: document.getElementById('front'),
  back: document.getElementById('back'),
  dark: document.getElementById('dark'),
  finalText: document.getElementById('finalText'),
  whiteFlash: document.getElementById('whiteFlash'),
  cat: document.getElementById('cat'),
  videoFade: document.getElementById('videoFade'),
  videoLoader: document.getElementById('videoLoader'),
  finalScreen: document.getElementById('finalScreen'),
  qrContainer: document.getElementById('qrContainer'),
  qr: document.getElementById('qr'),
  telegramLink: document.getElementById('telegramLink'),
  finalWish: document.getElementById('finalWish'),
  restart: document.getElementById('restart'),
  music: document.getElementById('music'),
  shaderCanvas: document.getElementById('shaderCanvas'),
  snowCanvas: document.getElementById('snow'),
  heartsCanvas: document.getElementById('heartsCanvas')
};

/* ========== –®–ï–ô–î–ï–†–ù–´–ô –§–û–ù ========== */
function initShaderBackground() {
  const canvas = elements.shaderCanvas;
  const gl = canvas.getContext('webgl') || canvas.getContext('experimental-webgl');
  
  if (!gl) return;
  
  canvas.width = window.innerWidth;
  canvas.height = window.innerHeight;
  
  const vertexShader = `
    attribute vec2 position;
    void main() {
      gl_Position = vec4(position, 0.0, 1.0);
    }
  `;
  
  const fragmentShader = `
    precision highp float;
    uniform float time;
    uniform vec2 resolution;
    
    void main() {
      vec2 uv = gl_FragCoord.xy / resolution.xy;
      vec2 p = uv - 0.5;
      p.x *= resolution.x / resolution.y;
      
      // –ú–µ—Ä—Ü–∞—é—â–∏–µ –∑–≤—ë–∑–¥—ã
      float stars = 0.0;
      for (float i = 0.0; i < 4.0; i++) {
        vec2 starPos = vec2(
          sin(time * 0.2 + i * 1.618) * 0.4,
          cos(time * 0.15 + i * 2.399) * 0.4
        );
        float dist = length(p - starPos);
        stars += 0.002 / dist * sin(time * 2.0 + i * 10.0) * 0.5 + 0.5;
      }
      
      // –ì—Ä–∞–¥–∏–µ–Ω—Ç–Ω–æ–µ –Ω–µ–±–æ
      vec3 sky = mix(
        vec3(0.02, 0.05, 0.1),
        vec3(0.05, 0.1, 0.2),
        uv.y
      );
      
      // –°–µ–≤–µ—Ä–Ω–æ–µ —Å–∏—è–Ω–∏–µ
      float aurora = sin(uv.x * 10.0 + time * 0.5) * 0.5 + 0.5;
      aurora *= exp(-abs(uv.y - 0.3) * 5.0);
      vec3 auroraColor = mix(
        vec3(0.0, 0.3, 0.5),
        vec3(0.3, 0.0, 0.5),
        sin(time * 0.3) * 0.5 + 0.5
      );
      
      vec3 color = sky + auroraColor * aurora * 0.1 + vec3(stars) * 0.1;
      gl_FragColor = vec4(color, 0.6);
    }
  `;
  
  const program = gl.createProgram();
  const vs = gl.createShader(gl.VERTEX_SHADER);
  const fs = gl.createShader(gl.FRAGMENT_SHADER);
  
  gl.shaderSource(vs, vertexShader);
  gl.shaderSource(fs, fragmentShader);
  gl.compileShader(vs);
  gl.compileShader(fs);
  
  if (!gl.getShaderParameter(vs, gl.COMPILE_STATUS)) {
    console.error('VS error:', gl.getShaderInfoLog(vs));
    return;
  }
  if (!gl.getShaderParameter(fs, gl.COMPILE_STATUS)) {
    console.error('FS error:', gl.getShaderInfoLog(fs));
    return;
  }
  
  gl.attachShader(program, vs);
  gl.attachShader(program, fs);
  gl.linkProgram(program);
  gl.useProgram(program);
  
  const vertices = new Float32Array([
    -1, -1, 1, -1, -1, 1,
    -1, 1, 1, -1, 1, 1
  ]);
  
  const buffer = gl.createBuffer();
  gl.bindBuffer(gl.ARRAY_BUFFER, buffer);
  gl.bufferData(gl.ARRAY_BUFFER, vertices, gl.STATIC_DRAW);
  
  const position = gl.getAttribLocation(program, 'position');
  gl.enableVertexAttribArray(position);
  gl.vertexAttribPointer(position, 2, gl.FLOAT, false, 0, 0);
  
  const timeUniform = gl.getUniformLocation(program, 'time');
  const resolutionUniform = gl.getUniformLocation(program, 'resolution');
  
  let time = 0;
  function render() {
    time += 0.016;
    
    gl.uniform1f(timeUniform, time);
    gl.uniform2f(resolutionUniform, canvas.width, canvas.height);
    
    gl.viewport(0, 0, canvas.width, canvas.height);
    gl.drawArrays(gl.TRIANGLES, 0, 6);
    
    requestAnimationFrame(render);
  }
  
  render();
  
  window.addEventListener('resize', () => {
    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight;
  });
}

/* ========== –£–õ–£–ß–®–ï–ù–ù–´–ô –°–ù–ï–ì ========== */
function initSnow() {
  const canvas = elements.snowCanvas;
  const ctx = canvas.getContext('2d');
  
  function resize() {
    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight;
  }
  resize();
  window.addEventListener('resize', resize);
  
  const flakes = Array.from({ length: 250 }, () => ({
    x: Math.random() * canvas.width,
    y: Math.random() * canvas.height,
    r: Math.random() * 4 + 1,
    v: Math.random() * 0.8 + 0.2,
    o: Math.random() * 0.6 + 0.3,
    sway: Math.random() * 0.8,
    angle: Math.random() * Math.PI * 2,
    spin: (Math.random() - 0.5) * 0.02
  }));
  
  function draw() {
    ctx.clearRect(0, 0, canvas.width, canvas.height);
    
    flakes.forEach(flake => {
      ctx.save();
      ctx.translate(flake.x, flake.y);
      ctx.rotate(flake.angle);
      
      ctx.beginPath();
      for (let i = 0; i < 6; i++) {
        const angle = (i * Math.PI) / 3;
        const x1 = Math.cos(angle) * flake.r;
        const y1 = Math.sin(angle) * flake.r;
        const x2 = Math.cos(angle + Math.PI / 6) * flake.r * 0.5;
        const y2 = Math.sin(angle + Math.PI / 6) * flake.r * 0.5;
        
        if (i === 0) ctx.moveTo(x1, y1);
        else ctx.lineTo(x1, y1);
        ctx.lineTo(x2, y2);
      }
      ctx.closePath();
      
      ctx.fillStyle = `rgba(255, 255, 255, ${flake.o})`;
      ctx.fill();
      
      ctx.restore();
      
      flake.y += flake.v;
      flake.x += Math.sin(flake.angle) * flake.sway;
      flake.angle += flake.spin;
      
      if (flake.y > canvas.height) {
        flake.y = -10;
        flake.x = Math.random() * canvas.width;
      }
      if (flake.x > canvas.width) flake.x = 0;
      if (flake.x < 0) flake.x = canvas.width;
    });
    
    requestAnimationFrame(draw);
  }
  
  draw();
}

/* ========== –£–õ–£–ß–®–ï–ù–ù–´–ï –°–ï–†–î–ï–ß–ö–ò ========== */
function initHearts() {
  const canvas = elements.heartsCanvas;
  const ctx = canvas.getContext('2d');
  
  function resize() {
    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight;
  }
  resize();
  window.addEventListener('resize', resize);
  
  function drawHeart(x, y, size, rotation, color) {
    ctx.save();
    ctx.translate(x, y);
    ctx.rotate(rotation);
    ctx.scale(size, size);
    
    ctx.beginPath();
    for (let i = 0; i < Math.PI * 2; i += 0.01) {
      const px = 16 * Math.pow(Math.sin(i), 3);
      const py = -(13 * Math.cos(i) - 5 * Math.cos(2*i) - 2 * Math.cos(3*i) - Math.cos(4*i));
      if (i === 0) ctx.moveTo(px, py);
      else ctx.lineTo(px, py);
    }
    ctx.closePath();
    ctx.fill();
    
    ctx.restore();
  }
  
  function spawnHeart() {
    if (state.hearts.length >= CONFIG.MAX_HEARTS) return;
    
    const colors = [
      '#ff3366', '#ff6633', '#ff33cc', '#33ccff', '#33ffcc',
      '#9966ff', '#ff9966', '#66ff99', '#ff66cc', '#66ccff'
    ];
    
    state.hearts.push({
      x: Math.random() * canvas.width,
      y: canvas.height + 50,
      size: Math.random() * 0.8 + 0.4,
      speedY: Math.random() * 0.6 + 0.3,
      speedX: (Math.random() - 0.5) * 0.4,
      rotation: Math.random() * Math.PI * 2,
      rotationSpeed: (Math.random() - 0.5) * 0.03,
      color: colors[Math.floor(Math.random() * colors.length)],
      life: 1,
      pulseSpeed: Math.random() * 0.03 + 0.01,
      pulsePhase: Math.random() * Math.PI * 2,
      trail: []
    });
  }
  
  function draw() {
    ctx.clearRect(0, 0, canvas.width, canvas.height);
    
    state.hearts.forEach((heart, index) => {
      // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–æ–∑–∏—Ü–∏–∏
      heart.y -= heart.speedY;
      heart.x += heart.speedX;
      heart.rotation += heart.rotationSpeed;
      heart.life -= 0.001;
      
      // –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ç–æ—á–∫–∏ –≤ —Å–ª–µ–¥
      heart.trail.push({ x: heart.x, y: heart.y });
      if (heart.trail.length > 15) heart.trail.shift();
      
      // –ü—É–ª—å—Å–∞—Ü–∏—è
      const pulse = Math.sin(Date.now() * heart.pulseSpeed + heart.pulsePhase) * 0.15 + 0.85;
      const currentSize = heart.size * pulse * heart.life;
      
      // –†–∏—Å–æ–≤–∞–Ω–∏–µ —Å–ª–µ–¥–∞
      heart.trail.forEach((point, i) => {
        const progress = i / heart.trail.length;
        const trailSize = currentSize * 0.3 * progress;
        const trailAlpha = 0.2 * progress * heart.life;
        
        ctx.fillStyle = heart.color.replace(')', `, ${trailAlpha})`).replace('rgb', 'rgba');
        drawHeart(point.x, point.y, trailSize, heart.rotation, heart.color);
      });
      
      // –†–∏—Å–æ–≤–∞–Ω–∏–µ —Å–µ—Ä–¥—Ü–∞
      ctx.fillStyle = heart.color;
      ctx.shadowColor = heart.color;
      ctx.shadowBlur = 20 * heart.life;
      drawHeart(heart.x, heart.y, currentSize, heart.rotation, heart.color);
      
      // –£–¥–∞–ª–µ–Ω–∏–µ —Å—Ç–∞—Ä—ã—Ö —Å–µ—Ä–¥–µ—Ü
      if (heart.life <= 0 || heart.y < -100 || 
          heart.x < -100 || heart.x > canvas.width + 100) {
        state.hearts.splice(index, 1);
      }
    });
    
    ctx.shadowBlur = 0;
    requestAnimationFrame(draw);
  }
  
  draw();
}

/* ========== –õ–ï–î–Ø–ù–´–ï –£–ó–û–†–´ ========== */
function createIceCrystals() {
  const corners = [
    { x: 0, y: 0 },
    { x: window.innerWidth, y: 0 },
    { x: window.innerWidth, y: window.innerHeight },
    { x: 0, y: window.innerHeight }
  ];
  
  corners.forEach(corner => {
    for (let i = 0; i < 12; i++) {
      const length = Math.random() * 200 + 100;
      const width = Math.random() * 3 + 1;
      const angle = Math.random() * Math.PI / 2;
      const delay = Math.random() * 2000;
      
      const crystal = document.createElement('div');
      crystal.className = 'iceCrystal';
      crystal.style.cssText = `
        left: ${corner.x}px;
        top: ${corner.y}px;
        width: ${length}px;
        height: ${width}px;
        transform-origin: left center;
        transform: rotate(${angle + (corners.indexOf(corner) * Math.PI / 2)}rad);
        animation-delay: ${delay}ms;
      `;
      
      elements.finalScreen.appendChild(crystal);
      state.iceCrystals.push(crystal);
    }
  });
}

/* ========== –ê–£–î–ò–û –°–ò–°–¢–ï–ú–ê ========== */
async function initAudio() {
  try {
    state.audioContext = new (window.AudioContext || window.webkitAudioContext)();
    if (state.audioContext.state === 'suspended') {
      await state.audioContext.resume();
    }
    
    const response = await fetch("flash.mp3");
    const arrayBuffer = await response.arrayBuffer();
    state.flashSound = await state.audioContext.decodeAudioData(arrayBuffer);
    
    return true;
  } catch (error) {
    console.warn("–ê—É–¥–∏–æ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ:", error);
    return false;
  }
}

/* ========== –í–ò–î–ï–û –°–ò–°–¢–ï–ú–ê ========== */
async function loadVideo() {
  return new Promise((resolve) => {
    if (state.videoLoaded) {
      resolve(true);
      return;
    }
    
    elements.cat.src = "cat.mp4";
    elements.cat.load();
    
    const onSuccess = () => {
      console.log("‚úÖ –í–∏–¥–µ–æ –∑–∞–≥—Ä—É–∂–µ–Ω–æ");
      state.videoLoaded = true;
      resolve(true);
    };
    
    const onError = () => {
      console.error("‚ùå –û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –≤–∏–¥–µ–æ");
      resolve(false);
    };
    
    elements.cat.addEventListener('loadeddata', onSuccess, { once: true });
    elements.cat.addEventListener('error', onError, { once: true });
    
    setTimeout(() => {
      if (!state.videoLoaded) {
        console.log("‚ö†Ô∏è –¢–∞–π–º–∞—É—Ç –∑–∞–≥—Ä—É–∑–∫–∏ –≤–∏–¥–µ–æ");
        resolve(false);
      }
    }, 10000);
  });
}

async function playVideo() {
  if (!state.videoLoaded) {
    elements.videoLoader.style.opacity = 1;
    await loadVideo();
  }
  
  try {
    elements.cat.muted = isMobile;
    await elements.cat.play();
    
    elements.videoLoader.style.opacity = 0;
    elements.cat.classList.add('playing');
    state.videoPlaying = true;
    
    if (isMobile) {
      setTimeout(() => {
        elements.cat.muted = false;
        elements.cat.volume = 1;
      }, 500);
    }
    
    setupVideoFadeout();
    return true;
  } catch (error) {
    console.error("‚ùå –û—à–∏–±–∫–∞ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è:", error);
    elements.videoLoader.style.opacity = 0;
    return false;
  }
}

function setupVideoFadeout() {
  let fadeStarted = false;
  
  function checkFade() {
    if (!elements.cat.duration || fadeStarted) return;
    
    const timeLeft = elements.cat.duration - elements.cat.currentTime;
    if (timeLeft <= CONFIG.VIDEO_FADE_TIME) {
      fadeStarted = true;
      const startTime = elements.cat.currentTime;
      
      function fade() {
        const elapsed = elements.cat.currentTime - startTime;
        const progress = Math.min(elapsed / CONFIG.VIDEO_FADE_TIME, 1);
        
        elements.videoFade.style.opacity = progress;
        elements.cat.volume = Math.max(0, 1 - progress);
        
        if (progress < 1) {
          requestAnimationFrame(fade);
        }
      }
      
      requestAnimationFrame(fade);
    }
  }
  
  const interval = setInterval(checkFade, 100);
  
  elements.cat.addEventListener('ended', () => {
    clearInterval(interval);
    elements.videoFade.style.opacity = 1;
    elements.cat.style.opacity = 0;
    showFinalScreen();
  });
}

/* ========== –í–°–ü–´–®–ö–ê ========== */
async function playFlash() {
  // –ë–µ–ª–∞—è –≤—Å–ø—ã—à–∫–∞
  elements.whiteFlash.style.transition = 'opacity 0.05s ease-out';
  elements.whiteFlash.style.opacity = 1;
  
  // –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∑–≤—É–∫
  if (state.audioContext && state.flashSound) {
    try {
      const source = state.audioContext.createBufferSource();
      const gainNode = state.audioContext.createGain();
      
      source.buffer = state.flashSound;
      source.connect(gainNode);
      gainNode.connect(state.audioContext.destination);
      
      gainNode.gain.value = 0;
      gainNode.gain.setValueAtTime(0, state.audioContext.currentTime);
      gainNode.gain.linearRampToValueAtTime(0.8, state.audioContext.currentTime + 0.05);
      gainNode.gain.exponentialRampToValueAtTime(0.001, state.audioContext.currentTime + 3);
      
      source.start();
    } catch (error) {
      console.warn("–ù–µ —É–¥–∞–ª–æ—Å—å –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ—Å—Ç–∏ –∑–≤—É–∫ –≤—Å–ø—ã—à–∫–∏");
    }
  }
  
  // –ü–ª–∞–≤–Ω–æ–µ –∏—Å—á–µ–∑–Ω–æ–≤–µ–Ω–∏–µ
  setTimeout(() => {
    elements.whiteFlash.style.transition = 'opacity 3s ease-out';
    elements.whiteFlash.style.opacity = 0;
  }, 100);
  
  // –ó–∞–ø—É—Å–∫ –≤–∏–¥–µ–æ
  setTimeout(async () => {
    const success = await playVideo();
    if (!success) {
      setTimeout(showFinalScreen, 2000);
    }
  }, CONFIG.FLASH_DELAY);
}

/* ========== –§–ò–ù–ê–õ–¨–ù–´–ô –≠–ö–†–ê–ù ========== */
function showFinalScreen() {
  setTimeout(() => {
    elements.finalScreen.style.opacity = 1;
    createIceCrystals();
    
    // –ê–Ω–∏–º–∞—Ü–∏—è –ø–æ—è–≤–ª–µ–Ω–∏—è
    setTimeout(() => {
      elements.qrContainer.style.opacity = 1;
      elements.qrContainer.style.transform = 'translate(-50%, -50%) scale(1)';
      
      setTimeout(() => {
        elements.qr.style.opacity = 1;
        elements.qr.style.transform = 'translateY(0) scale(1)';
      }, 300);
      
      setTimeout(() => {
        elements.telegramLink.style.opacity = 1;
        elements.telegramLink.style.transform = 'translateY(0)';
      }, 600);
      
      setTimeout(() => {
        elements.finalWish.style.opacity = 1;
        elements.finalWish.style.transform = 'translateY(0)';
        
        // –°–µ—Ä–¥–µ—á–∫–∏
        const heartInterval = setInterval(() => {
          if (state.hearts.length < CONFIG.MAX_HEARTS) {
            spawnHeart();
          }
        }, CONFIG.HEART_SPAWN_RATE);
        
        // –ö–Ω–æ–ø–∫–∞ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞
        setTimeout(() => {
          elements.restart.style.opacity = 1;
        }, 2000);
      }, 900);
    }, 500);
  }, CONFIG.FINAL_SCREEN_DELAY);
}

/* ========== –û–¢–ö–†–´–¢–ö–ê ========== */
const wishes = [
  {
    emoji: "üåü",
    text: "–ü—É—Å—Ç—å –ù–æ–≤—ã–π 2026 –≥–æ–¥ –ø—Ä–∏–Ω–µ—Å—ë—Ç –≤ –≤–∞—à—É –∂–∏–∑–Ω—å<br>–±–æ–ª—å—à–µ —Å–≤–µ—Ç–∞, —Ç–µ–ø–ª–∞ –∏ —Ä–∞–¥–æ—Å—Ç–Ω—ã—Ö —Å–æ–±—ã—Ç–∏–π,<br>–∞ –∫–∞–∂–¥—ã–π –¥–µ–Ω—å –±—É–¥–µ—Ç –Ω–∞–ø–æ–ª–Ω–µ–Ω —Å–º—ã—Å–ª–æ–º –∏ –≤–¥–æ—Ö–Ω–æ–≤–µ–Ω–∏–µ–º."
  },
  {
    emoji: "üí´",
    text: "–ñ–µ–ª–∞—é –∫—Ä–µ–ø–∫–æ–≥–æ –∑–¥–æ—Ä–æ–≤—å—è, –¥—É—à–µ–≤–Ω–æ–≥–æ —Å–ø–æ–∫–æ–π—Å—Ç–≤–∏—è<br>–∏ —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç–∏ –≤ –∑–∞–≤—Ç—Ä–∞—à–Ω–µ–º –¥–Ω–µ.<br>–ü—É—Å—Ç—å –≤—Å–µ —Ä–µ—à–µ–Ω–∏—è –¥–∞—é—Ç—Å—è –ª–µ–≥–∫–æ,<br>–∞ –ø–ª–∞–Ω—ã –≤–æ–ø–ª–æ—â–∞—é—Ç—Å—è –Ω–∞–∏–ª—É—á—à–∏–º –æ–±—Ä–∞–∑–æ–º."
  },
  {
    emoji: "ü§ç",
    text: "–ü—É—Å—Ç—å —Ä—è–¥–æ–º –≤—Å–µ–≥–¥–∞ –±—É–¥—É—Ç —Ç–µ, –∫—Ç–æ –ø–æ–Ω–∏–º–∞–µ—Ç –±–µ–∑ —Å–ª–æ–≤,<br>–ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –≤ —Ç—Ä—É–¥–Ω—É—é –º–∏–Ω—É—Ç—É<br>–∏ –∏—Å–∫—Ä–µ–Ω–Ω–µ —Ä–∞–¥—É–µ—Ç—Å—è –≤–∞—à–∏–º —É—Å–ø–µ—Ö–∞–º.<br>–¶–µ–Ω–∏—Ç–µ –º–æ–º–µ–Ω—Ç—ã –∏—Å–∫—Ä–µ–Ω–Ω–æ—Å—Ç–∏ –∏ —Ç–µ–ø–ª–∞."
  },
  {
    emoji: "‚ú®",
    text: "–ò –ø—É—Å—Ç—å —ç—Ç–æ—Ç –≥–æ–¥ —Å—Ç–∞–Ω–µ—Ç –≤—Ä–µ–º–µ–Ω–µ–º<br>—Ç—ë–ø–ª—ã—Ö –≤—Å—Ç—Ä–µ—á, –¥—É—à–µ–≤–Ω—ã—Ö —Ä–∞–∑–≥–æ–≤–æ—Ä–æ–≤<br>–∏ –Ω–µ–∑–∞–±—ã–≤–∞–µ–º—ã—Ö –º–≥–Ω–æ–≤–µ–Ω–∏–π,<br>–∫–æ—Ç–æ—Ä—ã–µ –±—É–¥—É—Ç —Å–æ–≥—Ä–µ–≤–∞—Ç—å —Å–µ—Ä–¥—Ü–µ –≤–µ—Å—å –≥–æ–¥!"
  }
];

function fillCard(element, wish) {
  element.innerHTML = `
    <div class="garland">
      ${Array.from({ length: 18 }, (_, i) => 
        `<span style="--i:${i}"></span>`
      ).join('')}
    </div>
    <div class="text">
      <h1>${wish.emoji}</h1>
      <p>${wish.text}</p>
    </div>
  `;
}

/* ========== –°–¢–ê–†–¢ ========== */
elements.startBtn.addEventListener('click', async function() {
  await initAudio();
  loadVideo();
  
  try {
    elements.music.muted = isMobile;
    await elements.music.play();
    
    if (isMobile) {
      setTimeout(() => {
        elements.music.muted = false;
        elements.music.volume = 0.7;
      }, 300);
    } else {
      elements.music.volume = 0.7;
    }
    
    // –ü–ª–∞–≤–Ω–æ–µ —Å–∫—Ä—ã—Ç–∏–µ —Å—Ç–∞—Ä—Ç–æ–≤–æ–≥–æ —ç–∫—Ä–∞–Ω–∞
    elements.start.style.opacity = 0;
    setTimeout(() => {
      elements.start.style.display = 'none';
      
      // –ü–æ–∫–∞–∑ –æ—Ç–∫—Ä—ã—Ç–∫–∏
      elements.scene.classList.add('active');
      fillCard(elements.front, wishes[0]);
      state.currentCard = 1;
      
      // –ê–≤—Ç–æ–ø–µ—Ä–µ–ª–∏—Å—Ç—ã–≤–∞–Ω–∏–µ
      const interval = setInterval(() => {
        if (state.currentCard >= wishes.length) {
          clearInterval(interval);
          setTimeout(showFinalTransition, 1000);
          return;
        }
        
        const isFront = state.currentCard % 2 === 1;
        fillCard(isFront ? elements.front : elements.back, wishes[state.currentCard]);
        
        elements.card.style.transform = isFront 
          ? 'rotateY(180deg)' 
          : 'rotateY(0deg)';
        
        state.currentCard++;
      }, CONFIG.CARD_FLIP_TIME);
      
    }, 800);
  } catch (error) {
    console.warn("–ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–ø—É—Å—Ç–∏—Ç—å –º—É–∑—ã–∫—É:", error);
    elements.start.style.display = 'none';
    elements.scene.classList.add('active');
    fillCard(elements.front, wishes[0]);
  }
});

function showFinalTransition() {
  elements.dark.style.opacity = 1;
  
  setTimeout(() => {
    elements.finalText.textContent = "‚ú® –° –ù–û–í–´–ú 2026 –ì–û–î–û–ú ‚ú®";
    elements.finalText.style.opacity = 1;
    
    setTimeout(() => {
      elements.finalText.style.opacity = 0;
      elements.music.pause();
      playFlash();
    }, 2500);
  }, CONFIG.FINAL_TEXT_DELAY);
}

/* ========== –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–Ø –ü–†–ò –ó–ê–ì–†–£–ó–ö–ï ========== */
window.addEventListener('load', () => {
  console.log("üéÑ –í–æ–ª—à–µ–±–Ω–∞—è –Ω–æ–≤–æ–≥–æ–¥–Ω—è—è –æ—Ç–∫—Ä—ã—Ç–∫–∞ –∑–∞–≥—Ä—É–∂–µ–Ω–∞");
  
  // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –≤—Å–µ—Ö —Å–∏—Å—Ç–µ–º
  initShaderBackground();
  initSnow();
  initHearts();
  
  // –ü—Ä–µ–¥–∑–∞–≥—Ä—É–∑–∫–∞ –º—É–∑—ã–∫–∏
  elements.music.load();
  
  // –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –≤–∏–¥–µ–æ
  elements.cat.addEventListener('error', () => {
    console.error("–í–∏–¥–µ–æ –Ω–µ –∑–∞–≥—Ä—É–∑–∏–ª–æ—Å—å");
    elements.videoLoader.textContent = "üé¨ –í–∏–¥–µ–æ –≤—Ä–µ–º–µ–Ω–Ω–æ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ";
  });
  
  // –ü—Ä–µ–¥–∑–∞–≥—Ä—É–∑–∫–∞ –æ—Å–Ω–æ–≤–Ω—ã—Ö —Ä–µ—Å—É—Ä—Å–æ–≤
  setTimeout(() => {
    loadVideo();
  }, 1000);
});
</script>

</body>
</html>

















